@page "/import"
@using MHRTalismanManager.Shared
@inject ILocalStorageService LocalStorage
@inject HttpClient Http

<Tabs Pills="true" FullWidth="true" Justified="true" SelectedTab="@_selectedTab" SelectedTabChanged="@OnSelectedTabChanged">
    <Items>
        <Tab Name="@DefaultTab">Files</Tab>
        <Tab Name="mhriseWikiDb">mhrise.wiki-db.com</Tab>
    </Items>
    <Content>
        <TabPanel Name="@DefaultTab">
            <FileImport @bind-Disabled="@_isImporting"></FileImport>
        </TabPanel>
        <TabPanel Name="mhriseWikiDb">
            <Tabs Pills="true" TabPosition="TabPosition.Left" SelectedTab="@_selectedMhriseWikiDbTab" SelectedTabChanged="name => _selectedMhriseWikiDbTab = name">
                <Items>
                    <Tab Name="@DefaultMhriseWikiDbTab">Import</Tab>
                    <Tab Name="export">Export</Tab>
                </Items>
                <Content>
                    <TabPanel Name="@DefaultMhriseWikiDbTab">
                        <MhRiseWikiDbImport @bind-Disabled="@_isImporting"></MhRiseWikiDbImport>
                    </TabPanel>
                    <TabPanel Name="export">
                        <MhRiseWikiDbExport Disabled="@_isImporting"></MhRiseWikiDbExport>
                    </TabPanel>
                </Content>
            </Tabs>
        </TabPanel>
    </Content>
</Tabs>

@code {
    private const string DefaultTab = "files";
    private const string DefaultMhriseWikiDbTab = "import";
    private string _selectedTab = DefaultTab;
    private string _selectedMhriseWikiDbTab = DefaultMhriseWikiDbTab;
    private bool _isImporting;
    
    private void OnSelectedTabChanged(string name)
    {
        _selectedTab = name;
    }

}